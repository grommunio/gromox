.\" SPDX-License-Identifier: CC-BY-SA-4.0 or-later
.\" SPDX-FileCopyrightText: 2021-2025 grommunio GmbH
.TH gromox\-mt2exm 8 "" "Gromox" "Gromox admin reference"
.SH Name
gromox\-mt2exm \(em Utility for importing various mail items into Gromox
.SH Synopsis
\fBgromox\-mt2exm\fP [...] [\fB\-Dcpt\fP] \fB-u\fP
[\fIlocalpart\fP]\fB@\fP\fIdomain.example\fP
.SH Description
gromox\-mt2exm reads a Gromox-specific mailbox transfer format data stream
(GXMT) from standard input as generated by gromox\-pff2mt(8) or other similarly
named utilities, and writes folders and messages included therein to a specific
Gromox mail store.
.PP
There is no cross-check for already-imported messages at this time. Messages
from the input stream will always generate new messages in the target mailbox.
.PP
Note that messages are always owned by the store they are in. Note that, when
importing to a public store, you may need to set some additional permissions on
that public store's folders so that a particular user is able to modify
messages after they have been imported. (All import/export utilites use
superuser access and need no permissions.)
.SH Options
.TP
\fB\-B\fP \fIname\fP
Place unanchored messages (loose objects that do not request placement in any
particular folder) in the folder specified by \-B. The accepted names are
documented in the gromox\-mbop(8) manpage under section "Folder specification".
Unanchored messages can be produced by e.g. gromox\-eml2mt, gromox\-tnef2mt,
gromox\-pff2mt \-\-only\-obj, gromox\-kdb2mt \-\-only\-obj.
.br
Default: \fIdraft\fP
.TP
\fB\-D\fP
Use delivery mode, i.e. treat messages as if they were sent through the mail
system rather than being imported. As such, messages are subject to inbox
rules, and folders in the MT stream will be ignored altogether, which also
implies that \-B is ignored.
.TP
\fB\-c\fP
Continuous operation mode. Errors during the delivery of a message are
reported, but mt2exm will continue with importing more messages. The default is
to exit after reporting a delivery error. Only useful with \fB\-D\fP.
.TP
\fB\-p\fP
Show properties in detail (enhances \fB\-t\fP).
.TP
\fB\-t\fP
Print folder/message summary as these items are processed.
.TP
\fB\-u\fP [\fIuser\fP]\fB@\fIdomain.example\fP
Target mail store which to import mails to. For the public folder of a domain,
leave out the local part, i.e. use \fB@\fP\fIdomain.example\fP.
.TP
\fB\-v\fP
Verbose mode: report individual FID/MIDs for newly created objects.
.TP
\fB\-x\fP
When importing an MT stream that does not request message splicing, mt2exm will
raise an error if a to-be-created folder already exists. This behavior can be
turned off with \-x. This option can be thought of what mkdir's \-p option
would do.
.TP
\fB\-\-skip\-notif\fP
Skip emitting MAPI notifications (when \-D is used). This is for development
only.
.TP
\fB\-\-skip\-rules\fP
Skip executing rules (when \-D is used).
.SH Exit status notes
An input stream of length zero is treated as an invalid GXMT stream (rather
than a stream that is valid but has no commands in it), and leads to a non-zero
exit status.
.SH Examples
PFF import to a private mailbox:
.PP
gromox\-pff2mt sample.pst | gromox\-mt2exm \-u user@domain.example
.PP
PFF import to a public folder:
.PP
gromox\-pff2mt sample.pst | gromox\-mt2exm \-u @domain.example
.SH See also
\fBgromox\fP(7), \fBgromox\-pff2mt\fP(8)
